<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Logging in Python</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/a11y-dark.min.css" integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/go.min.js"></script>
<script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
<link
  rel="stylesheet"
  href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css"
/>
<link rel="stylesheet" href="/static/css/custom.css" />
<script src="/js/main.js"></script>
<script>hljs.highlightAll();hljs.addPlugin(new CopyButtonPlugin());</script>
</head>
<body>
<div id="preamble" class="status">
<div class="site-header">
  <nav class="site-nav">
    <a href="/about.html">About</a>
    <a href="/notes.html">Notes</a>
    <a href="/references.html">References</a>
  </nav>
</div>
</div>
<div id="content" class="content">
<h1 class="title">Logging in Python</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org63a13f0">Setting Up Python Logging Properly</a>
<ul>
<li><a href="#org54b9d9a">My Custom Logging Setup</a></li>
<li><a href="#org8eefa75">Why Split stdout and stderr?</a></li>
<li><a href="#orgc59ad1a">For Notebooks and Long-Running Jobs</a></li>
<li><a href="#org6c4ecbd">Temporarily Disabling Logs in Notebooks</a></li>
<li><a href="#orgdc8637e">Example Usage</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org63a13f0" class="outline-2">
<h2 id="org63a13f0">Setting Up Python Logging Properly</h2>
<div class="outline-text-2" id="text-org63a13f0">
<p>
Python's logging module requires configuration before it works. This code prints nothing:
</p>

<div class="org-src-container">
<pre><code class="python"><span style="font-weight: bold;">import</span> logging
logging.info(<span style="font-style: italic;">"Hello world"</span>)
</code></pre>
</div>

<p>
By default, the root logger only shows WARNING and above. While <code>logging.basicConfig()</code> exists, here's a more flexible setup.
</p>
</div>
<div id="outline-container-org54b9d9a" class="outline-3">
<h3 id="org54b9d9a">My Custom Logging Setup</h3>
<div class="outline-text-3" id="text-org54b9d9a">
<p>
This configuration routes INFO+ logs to stdout and ERROR logs to stderr, with readable formatting:
</p>

<div class="org-src-container">
<pre><code class="python"><span style="font-weight: bold;">import</span> logging
<span style="font-weight: bold;">import</span> sys

<span style="font-weight: bold;">def</span> <span style="font-weight: bold;">setup_logging</span>(level=<span style="font-style: italic;">"INFO"</span>):
    <span style="font-weight: bold; font-style: italic;">logger</span> = logging.getLogger()
    logger.handlers.clear()  <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Remove existing handlers</span>
    logger.setLevel(level)

    <span style="font-weight: bold; font-style: italic;">formatter</span> = logging.Formatter(
        <span style="font-style: italic;">"%(asctime)s %(name)-12s %(levelname)-8s %(message)s"</span>
    )

    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">INFO/DEBUG/WARNING to stdout</span>
    <span style="font-weight: bold; font-style: italic;">stdout_handler</span> = logging.StreamHandler(sys.stdout)
    stdout_handler.setLevel(logging.DEBUG)
    stdout_handler.addFilter(<span style="font-weight: bold;">lambda</span> record: record.levelno &lt; logging.ERROR)
    stdout_handler.setFormatter(formatter)

    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">ERROR/CRITICAL to stderr</span>
    <span style="font-weight: bold; font-style: italic;">stderr_handler</span> = logging.StreamHandler(sys.stderr)
    stderr_handler.setLevel(logging.ERROR)
    stderr_handler.setFormatter(formatter)

    logger.addHandler(stdout_handler)
    logger.addHandler(stderr_handler)
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org8eefa75" class="outline-3">
<h3 id="org8eefa75">Why Split stdout and stderr?</h3>
<div class="outline-text-3" id="text-org8eefa75">
<p>
Separating streams helps log aggregators (like Google Cloud Logging) correctly categorize error vs. info logs. Without this, all logs may be treated as the same severity level.
</p>
</div>
</div>
<div id="outline-container-orgc59ad1a" class="outline-3">
<h3 id="orgc59ad1a">For Notebooks and Long-Running Jobs</h3>
<div class="outline-text-3" id="text-orgc59ad1a">
<p>
For Jupyter notebooks or remote sessions, logging to a file is more reliable:
</p>

<div class="org-src-container">
<pre><code class="python"><span style="font-weight: bold;">def</span> <span style="font-weight: bold;">file_logging</span>(filename, level=<span style="font-style: italic;">"INFO"</span>):
    <span style="font-weight: bold; font-style: italic;">logger</span> = logging.getLogger()
    logger.handlers.clear()
    logger.setLevel(level)

    <span style="font-weight: bold; font-style: italic;">formatter</span> = logging.Formatter(
        <span style="font-style: italic;">"%(asctime)s %(name)-12s %(levelname)-8s %(message)s"</span>
    )

    <span style="font-weight: bold; font-style: italic;">file_handler</span> = logging.FileHandler(f<span style="font-style: italic;">"</span>{filename}<span style="font-style: italic;">.log"</span>)
    file_handler.setFormatter(formatter)
    logger.addHandler(file_handler)
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org6c4ecbd" class="outline-3">
<h3 id="org6c4ecbd">Temporarily Disabling Logs in Notebooks</h3>
<div class="outline-text-3" id="text-org6c4ecbd">
<p>
When running tests or code that generates excessive logs, you can temporarily suppress output:
</p>

<div class="org-src-container">
<pre><code class="python"><span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Save current level</span>
<span style="font-weight: bold; font-style: italic;">pre_disable</span> = logging.getLogger().getEffectiveLevel()

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Disable all logging</span>
logging.disable(logging.CRITICAL)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">no logging from libraries, etc.</span>

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Re-enable logging</span>
logging.disable(pre_disable)
</code></pre>
</div>

<p>
This is particularly useful in Jupyter notebooks to keep output cells clean during testing or data processing.
</p>
</div>
</div>
<div id="outline-container-orgdc8637e" class="outline-3">
<h3 id="orgdc8637e">Example Usage</h3>
<div class="outline-text-3" id="text-orgdc8637e">
<div class="org-src-container">
<pre><code class="python">logging.info(<span style="font-style: italic;">"Before setup"</span>)  <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Prints nothing</span>

setup_logging()
logging.info(<span style="font-style: italic;">"Goes to stdout"</span>)
logging.error(<span style="font-style: italic;">"Goes to stderr"</span>)

file_logging(<span style="font-style: italic;">"myapp"</span>)
logging.info(<span style="font-style: italic;">"Goes to myapp.log"</span>)
</code></pre>
</div>

<p>
Output:
</p>
<div class="org-src-container">
<pre><code class="bash">$ python test.py
2025-01-24 10:15:22,331 root         INFO     Goes to stdout
2025-01-24 10:15:22,331 root         ERROR    Goes to stderr

$ cat myapp.log
2025-01-24 10:15:22,332 root         INFO     Goes to myapp.log
</code></pre>
</div>

<p>
<b>Note:</b> <code>handlers.clear()</code> prevents duplicate log messages when reconfiguring the logger.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date"><i>Last Modified: January 24, 2026</i></p>
</div>
</body>
</html>
